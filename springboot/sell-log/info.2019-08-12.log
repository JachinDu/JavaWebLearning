Starting PayServiceImplTest on dujiachengdeMacBook-Pro.local with PID 22761 (started by jc in /Users/jc/IdeaProjects/springboot/sell)
No active profile set, falling back to default profiles: default
Bootstrapping Spring Data repositories in DEFAULT mode.
Finished Spring Data repository scanning in 94ms. Found 4 repository interfaces.
Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$f07a99a6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
HHH000412: Hibernate Core {5.3.10.Final}
HHH000206: hibernate.properties not found
HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
Initialized JPA EntityManagerFactory for persistence unit 'default'
Initializing ExecutorService 'applicationTaskExecutor'
spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
Started PayServiceImplTest in 6.267 seconds (JVM running for 7.297)
HHH000397: Using ASTQueryTranslatorFactory
【微信支付】request=PayRequest(payTypeEnum=WXPAY_H5, orderId=1563769911696261785, orderAmount=3.2, orderName=微信点餐订单, openid=110110, spbillCreateIp=null)
--> POST https://api.mch.weixin.qq.com/pay/unifiedorder http/1.1
Content-Type: application/xml; charset=utf-8
Content-Length: 471

<xml>
   <appid>wxd898fcb01713c658</appid>
   <mch_id>1483469312</mch_id>
   <nonce_str>kla5Fyn9PmN53IpR</nonce_str>
   <sign>75240EBA98A08D49642ABA61C7A83657</sign>
   <body>微信点餐订单</body>
   <notify_url>http://jachin2013.natapp1.cc/sell/pay/notify</notify_url>
   <openid>110110</openid>
   <out_trade_no>1563769911696261785</out_trade_no>
   <spbill_create_ip>8.8.8.8</spbill_create_ip>
   <total_fee>320</total_fee>
   <trade_type>JSAPI</trade_type>
</xml>
--> END POST (471-byte body)
<-- 200 OK https://api.mch.weixin.qq.com/pay/unifiedorder (417ms)
Server: nginx
Date: Mon, 12 Aug 2019 01:09:09 GMT
Content-Type: text/plain
Content-Length: 440
Connection: keep-alive
Keep-Alive: timeout=8

<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wxd898fcb01713c658]]></appid>
<mch_id><![CDATA[1483469312]]></mch_id>
<nonce_str><![CDATA[nzAyw5CXAPgPz19F]]></nonce_str>
<sign><![CDATA[287A83CC90C93E27532565A8D77147DF]]></sign>
<result_code><![CDATA[FAIL]]></result_code>
<err_code><![CDATA[PARAM_ERROR]]></err_code>
<err_code_des><![CDATA[无效的openid]]></err_code_des>
</xml>
<-- END HTTP (440-byte body)
Shutting down ExecutorService 'applicationTaskExecutor'
Closing JPA EntityManagerFactory for persistence unit 'default'
HikariPool-1 - Shutdown initiated...
HikariPool-1 - Shutdown completed.
Starting SellApplication on dujiachengdeMacBook-Pro.local with PID 22783 (/Users/jc/IdeaProjects/springboot/sell/target/classes started by jc in /Users/jc/IdeaProjects/springboot/sell)
No active profile set, falling back to default profiles: default
Bootstrapping Spring Data repositories in DEFAULT mode.
Finished Spring Data repository scanning in 70ms. Found 4 repository interfaces.
Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$827beb0a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
Tomcat initialized with port(s): 8080 (http)
Initializing ProtocolHandler ["http-nio-8080"]
Starting service [Tomcat]
Starting Servlet engine: [Apache Tomcat/9.0.21]
Initializing Spring embedded WebApplicationContext
Root WebApplicationContext: initialization completed in 1125 ms
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
HHH000412: Hibernate Core {5.3.10.Final}
HHH000206: hibernate.properties not found
HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
Initialized JPA EntityManagerFactory for persistence unit 'default'
Initializing ExecutorService 'applicationTaskExecutor'
spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
Starting ProtocolHandler ["http-nio-8080"]
Tomcat started on port(s): 8080 (http) with context path '/sell'
Started SellApplication in 3.917 seconds (JVM running for 4.626)
HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m2s479ms).
Shutting down ExecutorService 'applicationTaskExecutor'
Closing JPA EntityManagerFactory for persistence unit 'default'
HikariPool-1 - Shutdown initiated...
HikariPool-1 - Shutdown completed.
Starting PayServiceImplTest on dujiachengdeMacBook-Pro.local with PID 22935 (started by jc in /Users/jc/IdeaProjects/springboot/sell)
No active profile set, falling back to default profiles: default
Bootstrapping Spring Data repositories in DEFAULT mode.
Finished Spring Data repository scanning in 90ms. Found 4 repository interfaces.
Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$134419f5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
HHH000412: Hibernate Core {5.3.10.Final}
HHH000206: hibernate.properties not found
HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
Initialized JPA EntityManagerFactory for persistence unit 'default'
Initializing ExecutorService 'applicationTaskExecutor'
spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
Started PayServiceImplTest in 5.486 seconds (JVM running for 6.278)
HHH000397: Using ASTQueryTranslatorFactory
【微信支付】request=PayRequest(payTypeEnum=WXPAY_H5, orderId=1563769911696261785, orderAmount=3.2, orderName=微信点餐订单, openid=oTgZpwTykQPhdjiI8rWYEgXjWhI8, spbillCreateIp=null)
--> POST https://api.mch.weixin.qq.com/pay/unifiedorder http/1.1
Content-Type: application/xml; charset=utf-8
Content-Length: 493

<xml>
   <appid>wxd898fcb01713c658</appid>
   <mch_id>1483469312</mch_id>
   <nonce_str>BU55SGQStq5a6j6s</nonce_str>
   <sign>2D43D7E8FEB228C61C08DD4A9933463A</sign>
   <body>微信点餐订单</body>
   <notify_url>http://jachin2013.natapp1.cc/sell/pay/notify</notify_url>
   <openid>oTgZpwTykQPhdjiI8rWYEgXjWhI8</openid>
   <out_trade_no>1563769911696261785</out_trade_no>
   <spbill_create_ip>8.8.8.8</spbill_create_ip>
   <total_fee>320</total_fee>
   <trade_type>JSAPI</trade_type>
</xml>
--> END POST (493-byte body)
<-- 200 OK https://api.mch.weixin.qq.com/pay/unifiedorder (490ms)
Server: nginx
Date: Mon, 12 Aug 2019 03:02:27 GMT
Content-Type: text/plain
Content-Length: 456
Connection: keep-alive
Keep-Alive: timeout=8

<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wxd898fcb01713c658]]></appid>
<mch_id><![CDATA[1483469312]]></mch_id>
<nonce_str><![CDATA[40rz8whoaApDvUVb]]></nonce_str>
<sign><![CDATA[383A00FA88A3F3BF765FC96D6DADA60B]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<prepay_id><![CDATA[wx12110227368931ef216503c21178873600]]></prepay_id>
<trade_type><![CDATA[JSAPI]]></trade_type>
</xml>
<-- END HTTP (456-byte body)
【微信支付】response=PayResponse(prePayParams=null, payUri=null, appId=wxd898fcb01713c658, timeStamp=1565578969, nonceStr=ZcgiFiGAIOFLXMya, packAge=prepay_id=wx12110227368931ef216503c21178873600, signType=MD5, paySign=AD9BBF436F4117217855D4B8423422DA, orderAmount=null, orderId=null, outTradeNo=null, mwebUrl=null)
Shutting down ExecutorService 'applicationTaskExecutor'
Closing JPA EntityManagerFactory for persistence unit 'default'
HikariPool-1 - Shutdown initiated...
HikariPool-1 - Shutdown completed.
Starting PayServiceImplTest on dujiachengdeMacBook-Pro.local with PID 22960 (started by jc in /Users/jc/IdeaProjects/springboot/sell)
No active profile set, falling back to default profiles: default
Bootstrapping Spring Data repositories in DEFAULT mode.
Finished Spring Data repository scanning in 93ms. Found 4 repository interfaces.
Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$690de9e7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
HHH000412: Hibernate Core {5.3.10.Final}
HHH000206: hibernate.properties not found
HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
Initialized JPA EntityManagerFactory for persistence unit 'default'
Initializing ExecutorService 'applicationTaskExecutor'
spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
Started PayServiceImplTest in 5.671 seconds (JVM running for 6.515)
HHH000397: Using ASTQueryTranslatorFactory
【微信支付】request={
  "payTypeEnum": "WXPAY_H5",
  "orderId": "1563769911696261785",
  "orderAmount": 3.2,
  "orderName": "微信点餐订单",
  "openid": "oTgZpwTykQPhdjiI8rWYEgXjWhI8"
}
--> POST https://api.mch.weixin.qq.com/pay/unifiedorder http/1.1
Content-Type: application/xml; charset=utf-8
Content-Length: 493

<xml>
   <appid>wxd898fcb01713c658</appid>
   <mch_id>1483469312</mch_id>
   <nonce_str>6OarZUZ3bvpFt3jh</nonce_str>
   <sign>350CE4A35F0F3B94EEECA3EE84C40219</sign>
   <body>微信点餐订单</body>
   <notify_url>http://jachin2013.natapp1.cc/sell/pay/notify</notify_url>
   <openid>oTgZpwTykQPhdjiI8rWYEgXjWhI8</openid>
   <out_trade_no>1563769911696261785</out_trade_no>
   <spbill_create_ip>8.8.8.8</spbill_create_ip>
   <total_fee>320</total_fee>
   <trade_type>JSAPI</trade_type>
</xml>
--> END POST (493-byte body)
<-- 200 OK https://api.mch.weixin.qq.com/pay/unifiedorder (2495ms)
Server: nginx
Date: Mon, 12 Aug 2019 03:05:46 GMT
Content-Type: text/plain
Content-Length: 456
Connection: keep-alive
Keep-Alive: timeout=8

<xml><return_code><![CDATA[SUCCESS]]></return_code>
<return_msg><![CDATA[OK]]></return_msg>
<appid><![CDATA[wxd898fcb01713c658]]></appid>
<mch_id><![CDATA[1483469312]]></mch_id>
<nonce_str><![CDATA[aUhGK2MYTOwh230o]]></nonce_str>
<sign><![CDATA[B2C72802455D847BF20AEC2FEBA775E6]]></sign>
<result_code><![CDATA[SUCCESS]]></result_code>
<prepay_id><![CDATA[wx12110545968303ef216503c21930229100]]></prepay_id>
<trade_type><![CDATA[JSAPI]]></trade_type>
</xml>
<-- END HTTP (456-byte body)
【微信支付】response={
  "appId": "wxd898fcb01713c658",
  "timeStamp": "1565579167",
  "nonceStr": "p4K5NgYxDafneenf",
  "packAge": "prepay_id\u003dwx12110545968303ef216503c21930229100",
  "signType": "MD5",
  "paySign": "680C6FB9E025821AB481919D428CBF14"
}
Shutting down ExecutorService 'applicationTaskExecutor'
Closing JPA EntityManagerFactory for persistence unit 'default'
HikariPool-1 - Shutdown initiated...
HikariPool-1 - Shutdown completed.
Starting SellApplication on dujiachengdeMacBook-Pro.local with PID 23224 (/Users/jc/IdeaProjects/springboot/sell/target/classes started by jc in /Users/jc/IdeaProjects/springboot/sell)
No active profile set, falling back to default profiles: default
Bootstrapping Spring Data repositories in DEFAULT mode.
Finished Spring Data repository scanning in 83ms. Found 4 repository interfaces.
Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$1ebdf479] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
Tomcat initialized with port(s): 8080 (http)
Initializing ProtocolHandler ["http-nio-8080"]
Starting service [Tomcat]
Starting Servlet engine: [Apache Tomcat/9.0.21]
Initializing Spring embedded WebApplicationContext
Root WebApplicationContext: initialization completed in 1220 ms
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
HHH000412: Hibernate Core {5.3.10.Final}
HHH000206: hibernate.properties not found
HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
Initialized JPA EntityManagerFactory for persistence unit 'default'
Initializing ExecutorService 'applicationTaskExecutor'
spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
Starting ProtocolHandler ["http-nio-8080"]
Tomcat started on port(s): 8080 (http) with context path '/sell'
Started SellApplication in 4.281 seconds (JVM running for 5.092)
Initializing Spring DispatcherServlet 'dispatcherServlet'
Initializing Servlet 'dispatcherServlet'
Completed initialization in 8 ms
HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m47s282ms).
HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m47s666ms).
HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=8m16s363ms).
HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7h5m15s206ms).
